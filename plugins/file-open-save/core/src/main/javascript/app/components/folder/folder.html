<resize-folders/>
<script type="text/ng-template" id="tree_item.html">
  <div ng-if="!folder.hidden" id="{{folder.path}}"
      class="folder"
      ng-click="vm.selectFolder(folder)"
      ng-dblclick="vm.selectAndOpenFolder(folder)"
      ng-class="{recents: folder.provider === 'recents',
                 local: folder.provider === 'local' && !folder.root,
                 repository: folder.provider ==='repository' && !folder.root,
                 environments: folder.provider ==='vfs' && !folder.root,
                 home: folder.path === '/home' && folder.action === 'Repository',
                 public: folder.path === '/public' && folder.action === 'Repository',
                 selected: folder === vm.selectedFolder,
                 empty: folder.hasChildren === false,
                 opened: folder.open === true}"
    ng-style="{paddingLeft: indent + 'px', width: vm.width === 0 ? 'auto' : vm.width - indent + 'px'}">
    <div class="folderArrowWrapper" ng-click="vm.openFolder(folder); $event.stopPropagation();">
      <div class="folderArrow"></div>
    </div>
    <div class="folderImage"
        ng-class="{loading: folder.loading}"></div>
    <div class="folderName">
      {{folder.name}}
    </div>
  </div>
  <div ng-show="folder.open">
    <!--<div ng-repeat="folder in folder.children | orderBy: folder : false : vm.compareFolders"-->
        <!--ng-include="'tree_item.html'"-->
        <!--ng-init="indent=indent+25"-->
        <!--ng-if="folder.type=='folder'"></div>-->
    <div ng-repeat="folder in folder.children"
        ng-include="'tree_item.html'"
        ng-init="indent=indent+25"
        ng-if="folder.type=='folder'">
    </div>
  </div>
</script>
<div ng-repeat="folder in vm.getTree()" ng-include="'tree_item.html'" ng-init="indent=0" ng-if="folder.name != '' && !folder.hidden"></div>
